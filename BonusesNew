/*
    The below program calculates the amount of the bonus, that each employee should receive;
    The specifications as presented by the customer explicitly say they want a final result in the integer format, not a double;
    This is the reason why the truncation that happens in integer division is producing a "somewhat incorrect result" - this is intended;
    The reason why "double" is used for the variables is due to number of days for each employee, which can be greater than the total work days;
        --> example: For an Employee with 23 working days in a month having a total of 21 work days, the math is:
            -----> int variable = 23 / 21 = 0; // which breaks all consequent calculations;
            -----> double variable 23 / 21 = 1.0952380952380953; // which is than casted into an (int);
 */

import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Scanner;

public class Bonuses {

    public static void main(String[] args) {

        Date date = new Date();
        SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm");

        Employee e1 = new Employee("AA", 770);
        Employee e2 = new Employee("VBI", 660);
        Employee e3 = new Employee("VV", 890);
        Employee e4 = new Employee("EP", 750);

        int totalSalary;
        int totalWorkDays;
        int monthWorkDays = 21;
        double workDaysInput1;
        double workDaysInput2;
        double workDaysInput3;
        double workDaysInput4;

        totalSalary = e1.getSalary() + e2.getSalary() + e3.getSalary() + e4.getSalary();

        Scanner scanner = new Scanner(System.in);

        System.out.println("Enter the work days for the employee " + e1.getName());
        int d1 = scanner.nextInt();
        System.out.println("Enter the work days for the employee " + e1.getName());
        int d2 = scanner.nextInt();
        System.out.println("Enter the work days for the employee " + e3.getName());
        int d3 = scanner.nextInt();
        System.out.println("Enter the work days for the employee " + e4.getName());
        int d4 = scanner.nextInt();
        totalWorkDays = d1 + d2 + d3 + d4;
        workDaysInput1 = d1;
        workDaysInput2 = d2;
        workDaysInput3 = d3;
        workDaysInput4 = d4;

        System.out.println("Please, enter the bonus: ");
        int bonus = scanner.nextInt();
        System.out.println("------------------");

        System.out.println("The total amount of all salaries is: " + totalSalary + "lv");
        System.out.println("The bonus percentage is: " + bonus + "%");
        System.out.println("The total number of work days is: " + totalWorkDays + " days \n");

        double bonusDays1 = getBonusDays1(workDaysInput1, totalWorkDays);
        double bonusDays2 = getBonusDays1(workDaysInput2, totalWorkDays);
        double bonusDays3 = getBonusDays1(workDaysInput3, totalWorkDays);
        double bonusDays4 = getBonusDays1(workDaysInput4, totalWorkDays);

        double employee1BaseBonus = getEmployee1BaseBonus(e1, bonus, monthWorkDays, workDaysInput1);
        double employee2BaseBonus = getEmployee1BaseBonus(e2, bonus, monthWorkDays, workDaysInput2);
        double employee3BaseBonus = getEmployee1BaseBonus(e3, bonus, monthWorkDays, workDaysInput3);
        double employee4BaseBonus = getEmployee1BaseBonus(e4, bonus, monthWorkDays, workDaysInput4);

        double totalEmployeeBonus = employee1BaseBonus + employee2BaseBonus + employee3BaseBonus + employee4BaseBonus;
        double difference = getBonusDays1(getExtraBonus1(totalSalary * bonus), 100) - getExtraBonus1(totalEmployeeBonus);

        double extraBonus1 = getExtraBonus1(difference * bonusDays1);
        double extraBonus2 = getExtraBonus1(difference * bonusDays2);
        double extraBonus3 = getExtraBonus1(difference * bonusDays3);
        double extraBonus4 = getExtraBonus1(difference * bonusDays4);

        int finalBonus1 = getFinalBonus1(employee1BaseBonus, extraBonus1);
        int finalBonus2 = getFinalBonus1(employee2BaseBonus, extraBonus2);
        int finalBonus3 = getFinalBonus1(employee3BaseBonus, extraBonus3);
        int finalBonus4 = getFinalBonus1(employee4BaseBonus, extraBonus4);

        System.out.println("The bonus of " + e1.getName() + " is " + finalBonus1 + "lv");
        System.out.println("The bonus of " + e2.getName() + " is " + finalBonus2 + "lv");
        System.out.println("The bonus of " + e3.getName() + " is " + finalBonus3 + "lv");
        System.out.println("The bonus of " + e4.getName() + " is " + finalBonus4 + "lv \n");
        System.out.println("The report is generated on: " + formatter.format(date));
    }

    private static int getFinalBonus1(double employee1BaseBonus, double extraBonus1) {
        return (int) getExtraBonus1(employee1BaseBonus + extraBonus1);
    }

    private static double getExtraBonus1(double difference) {
        return difference;
    }

    private static double getBonusDays1(double workDaysInput1, int totalWorkDays) {
        return workDaysInput1 / totalWorkDays;
    }

    private static double getEmployee1BaseBonus(Employee e1, int bonus, int monthWorkDays, double workDaysInput1) {
        return getExtraBonus1(e1.getSalary() * bonus) / 100 / getExtraBonus1(monthWorkDays / workDaysInput1);
    }
}
